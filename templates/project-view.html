{% extends "base.html" %}
{% block body_class %}light-mode{% endblock %}
{% block content %}

<style>
  /* 1. Set the Dynamic Font Family */
  :root {
    --dynamic-font: {{ project.font_config.family | safe }};
  }

  /* 2. Apply it to the Typeface Section classes */
  .type-card .aa,
  .type-card .font-name,
  .type-card .type-meta,
  .type-card .type-scale .heading,
  .type-card .type-scale .subheading,
  .type-card .type-scale .body,
  .type-card .type-scale span {
    font-family: var(--dynamic-font) !important;
  }
</style>

<section class="case-study p02">
  <div class="case-container">

    <!-- ================= HERO ================= -->
    <header class="case-hero reveal">
      <h1>{{project.title}}</h1>
      <p class="subtitle">{{project.category}}</p>

      <div class="meta">
        <div class="info">
          <span>Role</span>{{project.role}}
        </div>
        <div class="info">
          <span>Year</span>
          {{ project.year }}
        </div>
      </div>
    </header>

    <!-- ================= AV CARD PLATFORM (PURPLE PLACEHOLDER) ================= -->
    <section class="content-block reveal">
      <h2>{{project.title}} Platform</h2>
      <div class="mockup-placeholder {{project.color}}">
        <div >
          <img class="mockup-overlay" src="{{ url_for('static', filename=project.headerimage) }}" alt="{{ project.name }}">
        </div>
      </div>
    </section>

    <!-- ================= OVERVIEW ================= -->
    <section class="content-block reveal">
      <h2>Overview</h2>
      <p>
        {{project.overview}}
      </p>
    </section>

    <!-- ================= WHAT WASN'T WORKING ================= -->
    <section class="content-block reveal">
      <h2>What Wasn’t Working?</h2>
      {% for challenge in project.challenges %}
      <ol class="problem-list">
        <li>
          <strong>{{challenge.title}}</strong>
          <p>
            {{challenge.text}}
          </p>
        </li>
      </ol>
      {% endfor %}
    </section>

    <!-- ================= HOW WE SOLVED IT ================= -->
    <section class="content-block reveal">
      <h2>How We Solved It</h2>
      <p>
        {{project.solution_text}}
      </p>
    </section>

    <!-- ================= KEY SOLUTIONS IMPLEMENTED ================= -->
    <section class="content-block reveal">
      <h2>Key Solutions Implemented</h2>

      <ol class="solution-list">
        {% for solution in project.key_solutions %}
        <ol class="problem-list">
          <li>
            <strong>{{solution.title}}</strong>
            <p>
              {{solution.text}}
            </p>
          </li>
        </ol>
        {% endfor %}
      </ol>
    </section>

    <!-- ================= TARGET USERS ================= -->
    <section class="content-block reveal">
      <h2>Target Users</h2>
      {% for target in project.target_users %}
      <ol class="problem-list">
        <li>
          <p>
            {{ target }}
          </p>
        </li>
      </ol>
      {% endfor %}
    </section>

    <!-- ================= USER RESEARCH ================= -->
    <section class="content-block reveal">
      <h2>User Research</h2>
      <p>
        Insights were gathered from users based on their experiences with online payments, subscription services,
        and existing virtual or physical card solutions. This helped uncover common frustrations around card declines,
        spending limits, and unclear transaction flows.
      </p>

      <h3>Pain Points</h3>
      <ul class="bullets">
        <li>Frequent card declines when paying for international services or subscriptions.</li>
        <li>Limited control over spending and card limits across different use cases.</li>
        <li>Confusion around card activation, funding, and transaction status.</li>
        <li>Concerns about security when entering card details online.</li>
        <li>Difficulty managing multiple cards for different purposes.</li>
      </ul>
    </section>

    <!-- ================= RESEARCH & DESIGN PROCESS (PURPLE PLACEHOLDER CARD) ================= -->
    <section class="content-block reveal">
      <h2>Research And Design Process</h2>

      <div class="process-card {{project.color}}">

        <h3>Why This Process Worked</h3>
        <p class="process-intro">
          This structured approach ensured that design decisions were rooted in real user problems while balancing
          business needs, security requirements, and scalability. The result was a seamless virtual card experience
          that feels intuitive, trustworthy, and easy to use.
        </p>

        <!-- TIMELINE -->
        <div class="process-timeline">

          <!-- Dots row -->
          <div class="timeline-dots">
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
          </div>

          <!-- Content row -->
          <div class="process-steps">
            <div class="step">
              <h4>Research</h4>
              <ul>
                {% for item in project.process.steps.research %}
                <li>{{ item }}</li>
                {% endfor %}
              </ul>
            </div>

            <div class="step">
              <h4>Analysis</h4>
              <ul>
                {% for item in project.process.steps.analysis %}
                <li>{{ item }}</li>
                {% endfor %}
              </ul>
            </div>

            <div class="step">
              <h4>Design</h4>
              <ul>
                {% for item in project.process.steps.design %}
                <li>{{ item }}</li>
                {% endfor %}
              </ul>
            </div>

            <div class="step">
              <h4>Test</h4>
              <ul>
                {% for item in project.process.steps.test %}
                <li>{{ item }}</li>
                {% endfor %}
              </ul>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- ================= PERSONAS ================= -->
    <section class="content-block reveal">
      <h2>User Personas</h2>

      <div class="persona">
        {% for persona in project.personas %}

        <img src="{{ url_for('static', filename=persona.image) }}" alt="{{ persona.name }}">
        <div>
          <h3>{{persona.name}} – {{persona.role}}</h3>
          <p><strong>Age:</strong> {{persona.age}}</p>
          <p><strong>Occupation:</strong> {{persona.occupation}}</p>
          <p><strong>Tech Comfort:</strong> {{ persona.tech_comfort }}</p>

          <h4>Goals</h4>
          <ul class="bullets">
            {% for goal in persona.goals %}
            <li>{{goal}}</li>
            {% endfor %}
          </ul>

          <h4>Frustrations &amp; Painpoints</h4>
          <ul class="bullets">
            {% for frustration in persona.frustrations %}
            <li>{{frustration}}</li>
            {% endfor %}
          </ul>

        </div>
        {% endfor %}
      </div>

    </section>

    <!-- ================= DESIGN SYSTEM ================= -->
    <section class="content-block reveal">
      <h2>A Scalable Design System</h2>
      <p class="muted">
        The Avcard design system was built around core components essential to the platform, serving as a central reference during developer
        handoff and enabling developers to reuse components efficiently throughout development.
      </p>
    </section>

    <!-- ================= TYPEFACE ================= -->
    <section class="content-block background-gray reveal">
      <h2>Typeface</h2>

      <div class="type-card">
        <div class="type-top">
          <div class="type-brand">
            <span class="aa">Aa</span>
            <span class="font-name">{{ project.font_config.name }}</span>
          </div>

          <div class="type-meta">
            <div class="glyphs">AaBbCcDdEeFfGg</div>
            <div class="glyphs">0123456789</div>
            <div class="weights">Light <span>Medium</span> <strong>Semibold</strong></div>
          </div>
        </div>

        <div class="type-scale">
          <div class="row">
            <p class="heading">The Quick Brown Fox Jump Over The Lazy Fox</p>
            <span>Heading 40px</span>
          </div>
          <div class="row">
            <p class="subheading">The Quick Brown Fox Jump Over The Lazy Fox</p>
            <span>Subheading 24px</span>
          </div>
          <div class="row">
            <p class="body">The Quick Brown Fox Jump Over The Lazy Fox</p>
            <span>Body 14px</span>
          </div>
        </div>
      </div>
    </section>

    <!-- ================= COLORS ================= -->
    <section class="content-block background-gray reveal">
      <h2>Colors</h2>

      <h3>Primary Shade</h3>
      <p class="muted">
        This is the brand color and is used for primary actions, like buttons and key elements. The primary color also highlights the main actions on the page.
      </p>

      <div class="swatch-grid">
        {% for c in project.colors.primary %}
        <div class="swatch">
          <div class="chip" style="background: {{ c.hex }}"></div>
          <strong>{{ c.shade }}</strong>
          <small>{{ c.hex }}</small>
          <small class="sub">{{ c.rgba }}</small>
        </div>
        {% endfor %}
      </div>

      <h3>Secondary Shade</h3>
      <p class="muted">
        This is the Secondary color it can be used for elements like buttons, it can also be used to emphasize the difference between app bars and other surfaces.
      </p>

      <div class="swatch-grid">
        {% for c in project.colors.secondary %}
        <div class="swatch">
          <div class="chip" style="background: {{ c.hex }}"></div>
          <strong>{{ c.shade }}</strong>
          <small>{{ c.hex }}</small>
          <small class="sub">{{ c.rgba }}</small>
        </div>
        {% endfor %}
      </div>

      <h3>Gray</h3>
      <p class="muted">
        Gray is a neutral color and can be used for text, borders, and icons. Most text should either be black/base or darker shades of Gray, with some additional
        shades of dark gray for content hierarchy. Follow contrast accessibility requirements when considering anything but black or gray text on light/white
        backgrounds.
      </p>

      <div class="swatch-grid">
        {% for c in project.colors.gray %}
        <div class="swatch">
          <div class="chip" style="background: {{ c.hex }}"></div>
          <strong>{{ c.shade }}</strong>
          <small>{{ c.hex }}</small>
          <small class="sub">{{ c.rgba }}</small>
        </div>
        {% endfor %}
      </div>
    </section>

    <!-- ================= AvCard Platform================= -->
    <section class="content-block  reveal">
      <h2>{{ project.title }} Platform</h2>

      <div class="mockup-placeholder {{project.color}}">
        <div class="mockup-overlay">
        </div>
      </div>

      <div class="mockup-placeholder {{project.color}}">
        <div class="mockup-overlay"></div>
      </div>

      <div class="mockup-placeholder {{project.color}}">
        <div class="mockup-overlay"></div>
      </div>
    </section>

    <!-- ================= MOBILE SCREENS ================= -->
    <section class="content-block reveal">
      <h2>Mobile Screens</h2>

      <p>
        {{ project.mobile_description }}
      </p>

      <div class="mockup-placeholder {{project.color}}">
        <div class="mockup-overlay"></div>
      </div>
    </section>

    <!-- ================= LANDING PAGE (LIGHT) ================= -->
    <section class="content-block reveal">
      <h2>Landing Page</h2>

      <div class="mockup-placeholder {{project.color}} soft">
        <div class="mockup-overlay"></div>
      </div>
    </section>

  </div>
</section>

<script>
  const revealEls = document.querySelectorAll('.reveal');
  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) entry.target.classList.add('active');
    });
  }, { threshold: 0.15 });

  revealEls.forEach(el => observer.observe(el));
</script>

{% endblock %}
